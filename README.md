# Stellar Burgers UI Tests

Автоматизированные UI тесты для веб-приложения Stellar Burgers, написанные на Python с использованием Selenium WebDriver, pytest, Page Object Model и Allure для отчётности.

## Описание проекта

Проект содержит автоматизированные тесты для проверки функциональности сайта Stellar Burgers:
- Авторизация пользователей
- Навигация по сайту
- Работа с конструктором бургеров (drag&drop ингредиентов)
- Оформление заказов
- Проверка счётчиков заказов
- Модальные окна ингредиентов

## Технологии

- **Python 3.13**
- **Selenium WebDriver** - для автоматизации браузера
- **pytest** - фреймворк для тестирования
- **Page Object Model** - паттерн для организации кода
- **Allure** - система отчётности
- **seletools** - библиотека для стабильного drag&drop
- **webdriver-manager** - автоматическое управление драйверами

## Структура проекта

```
Diplom_3-develop3/
├── pages/                    # Классы страниц (Page Object Model)
│   ├── base_page.py         # Базовый класс страницы
│   ├── main_page.py         # Главная страница конструктора
│   ├── auth_page.py         # Страница авторизации
│   └── feed_page.py         # Страница ленты заказов
├── tests/                   # Тестовые сценарии
│   ├── test_navigation.py   # Тесты навигации
│   ├── test_ingredient_modal.py # Тесты модальных окон
│   ├── test_order_flow.py   # Тесты оформления заказов
│   └── test_order_counter.py # Тесты счётчиков
├── locators.py              # Локаторы элементов страниц
├── conftest.py              # Фикстуры и настройки pytest
├── data.py                  # Тестовые данные
├── urls.py                  # URL-адреса
├── requirements.txt         # Зависимости проекта
└── README.md               # Документация
```

## Установка и настройка

### 1. Клонирование репозитория
```bash
git clone <URL_репозитория>
cd Diplom_3-develop3
```

### 2. Создание виртуального окружения
```bash
python -m venv venv
```

### 3. Активация виртуального окружения
**Windows:**
```bash
venv\Scripts\activate
```

**Linux/macOS:**
```bash
source venv/bin/activate
```

### 4. Установка зависимостей
```bash
pip install -r requirements.txt
```

## Запуск тестов

### Базовые команды
```bash
# Запуск всех тестов в Chrome
pytest --browser=chrome

# Запуск всех тестов в Firefox
pytest --browser=firefox

# Запуск с формированием Allure-отчёта
pytest --browser=chrome --alluredir=allure_results_chrome
pytest --browser=firefox --alluredir=allure_results_firefox
```

### Запуск конкретных тестов
```bash
# Запуск теста оформления заказа
pytest tests/test_order_flow.py::TestOrderFlow::test_order_counters_increment_after_order --browser=chrome

# Запуск тестов навигации
pytest tests/test_navigation.py --browser=firefox

# Запуск с подробным выводом
pytest --browser=chrome -v
```

### Просмотр Allure-отчётов
```bash
# Генерация и открытие отчёта
allure serve allure_results_chrome
allure serve allure_results_firefox
```

## Особенности реализации

### Page Object Model
- Все взаимодействия с элементами страниц вынесены в отдельные классы
- Локаторы хранятся в отдельном файле `locators.py`
- Базовый класс `BasePage` содержит общие методы

### Стабильный drag&drop
- Используется библиотека `seletools` для корректной работы в Firefox
- Метод `drag_and_drop()` обеспечивает стабильное перетаскивание

### Ожидания и синхронизация
- Явные ожидания с помощью `WebDriverWait`
- Ожидание исчезновения оверлеев модальных окон
- Задержки для обновления счётчиков

### Авторизация
- Фикстура `authorized_browser` для тестов, требующих авторизации
- Использование существующих пользователей из `data.py`

## Тестовые данные

В файле `data.py` хранятся данные для авторизации:
- `EXISTING_USER` - существующий пользователь для тестов
- Пользователь должен быть зарегистрирован на сайте вручную

## Поддерживаемые браузеры

- **Chrome** - полная поддержка всех функций
- **Firefox** - полная поддержка с использованием seletools для drag&drop

## Структура тестов

### TestNavigation
- Переход по кнопке "Конструктор"
- Переход по кнопке "Лента заказов"

### TestIngredientModal
- Открытие модального окна ингредиента
- Закрытие модального окна

### TestOrderFlow
- Проверка увеличения счётчика ингредиента
- Оформление заказа и проверка счётчиков

### TestOrderCounter
- Проверка отображения счётчиков заказов

## Отладка и диагностика

### Проблемы с drag&drop
- Убедитесь, что установлена библиотека `seletools`
- Проверьте, что используется `drag_and_drop()` из seletools

### Проблемы с авторизацией
- Проверьте данные пользователя в `data.py`
- Убедитесь, что пользователь зарегистрирован на сайте

### Проблемы с модальными окнами
- Используйте JavaScript клики для проблемных элементов
- Добавьте ожидания исчезновения оверлеев

## Лицензия

Проект создан в рамках дипломной работы по автоматизации тестирования.